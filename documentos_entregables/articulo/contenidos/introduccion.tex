%
% Sección de Introducción.
% Artículo.
% Proyecto Lovelace.
%

\section{Introducción}

% Contexto histórico: cómo llegó a ser popular la tokenización.

Cuando el comercio a través de Internet comenzó a popularizarse, los fraudes de
tarjetas bancarias se volvieron un problema alarmante: según \cite{wallethub},
en 2001 se tuvieron pérdidas de 1.7 miles de millones de dólares y para 2002
aumentaron a 2.1. Como una medida de protección, las principales compañías de
tarjetas de crédito publicaron un estándar obligatorio para todos aquellos que
procesaran más de 20 000 transacciones anuales: el PCI DSS (en inglés,
\textit{Payment Card Industry Data Security Standard} \cite{pci_dss}). Este
estándar cuenta con una gran cantidad de requerimientos \cite{search_security,
uk_association}, por lo que, para negocios medianos y pequeños, resulta
muy difícil obtener un resultado positivo. A pesar de la publicación del
estándar en 2004, han seguido existiendo grandes filtraciones de datos
(\textit{TJX} en 2006, \textit{Hannaford Bros.} en 2008, \textit{Target} en
2013, \textit{Home Depot} en 2014, por mencionar algunos ejemplos).

% Introducción a los sistemas tokenizadores
% ¿Qué es la tokenización y cómo se usa normalmente (arquitectura).

Es en este contexto en el que surge la alternativa de la tokenización. Hasta
antes de este momento, la idea era proteger la información sensible en donde
quiera que se encontrase. Si los números de tarjetas de los usuarios se
encontraban dispersos en diversas partes de un sistema, había que proteger todas
esas partes. La tokenización consiste en concentrar la información sensible en
un solo lugar para hacer la tarea de protección más sencilla. Al momento de
ingreso de un nuevo valor sensible, por ejemplo, la información bancaria de un
usuario, se genera un token ligado a esa información: el token se usa en todo el
sistema y la información sensible se protege en un solo lugar. Un posible
adversario con acceso a los tokens no debe poder obtener la información sensible
a partir de estos.

Una de las ventajas de la tokenización es que puede verse como un sistema
autónomo, independiente del sistema principal. De esta manera se establece una
separación de responsabilidades: el sistema principal se ocupa de la operación
del negocio (por ejemplo, una tienda en línea) y el sistema tokenizador se
dedica a la protección de la información sensible. Hoy en día varias compañías
ofrecen servicios de tokenización que permiten que los comerciantes se libren
casi por completo de cumplir con el PCI DSS. En la Figura
\ref{figura:arquitectura_tokenizacion} se muestra una distribución bastante
común para un comercio en línea: el sistema tokenizador guarda la información
sensible en su base de datos y se encarga de realizar las transacciones
bancarias.

% Muestra del problema: ejemplos de discursos publicitarios comunes.

Desde sus inicios, la tokenización se ha visto rodeada por una nube de
desinformación, pues cada empresa usaba el término sin que existiera una
definición formal, acordada por todos. Una de las consecuencias de esta
desinformación es un mensaje bastante común entre las páginas de las empresas
que dan este servicio: la tokenización es un medio mucho más seguro que la
criptografía para proteger datos de tarjetas bancarias. Por ejemplo, lo único
que \textit{Shift4} dice con claridad sobre sus tokens es que se trata de
valores aleatorios, únicos y alfanuméricos \cite{shif4_uno}; para
\textit{Braintree}, la única manera de generar tokens es por métodos aleatorios 
\cite{braintree_uno}; para \textit{Securosis} los tokens son valores aleatorios
que nada tienen que ver con la criptografía \cite{securosis}. La mayoría de las
soluciones tratan a sus métodos como secretos de compañía, esperan que el trato
entre cliente y proveedor esté basado en la confianza y no en la comparación de
los propios métodos.

% Establecer relación entre criptografía y tokenización.

Como se verá por la exposición de algunos métodos, la tokenización es una
aplicación de la criptografía y, como tal, debe ser analizada con la misma
formalidad que las demás herramientas criptográficas. Por ejemplo, uno de los
errores más comunes entre las empresas que dan el servicio es considerar que la
generación de números aleatorios no utiliza algoritmos criptográficos.

% Estructura del artículo.

En la Sección \ref{sec:preliminares} de este trabajo se tocan algunos temas
preliminares necesarios para presentar, en la Sección \ref{sec:algoritmos},
algunos de los métodos de tokenización. En la Sección \ref{sec:conclusiones} se
presentan los resultados de las comparaciones de desempeño realizadas y se
concluye con una discusión alrededor del tema.

% TODO: cambiar con qué se concluye.

% \begin{figure}
%   \centering
%   \includegraphics[width=0.8\linewidth]
%     {algoritmos_tokenizadores/diagramas/sistema_tokenizador.png}
%   \caption{Arquitectura típica de un sistema tokenizador.}
%   \label{figura:arquitectura_tokenizacion}
% \end{figure}

\begin{figure}
  \centering
  \begin{tikzpicture}[
    entorno/.style={
      rectangle,
      draw = black,
      thin,
      inner sep = 4mm,
      text width = 20mm,
      align = center,
      minimum height = 1.5cm},
    etiqueta/.style={
      text width = 15mm,
      align = center
    }]

    % Entornos
    \node[entorno]
      (tokens)
      {Sistema tokenizador};
    \node[entorno]
      (tienda)
      [right = 2.5cm of tokens]
      {Entorno de comerciante};
    \node[entorno]
      (banco)
      [below = 1.5cm of tokens]
      {Entorno de banco};
    \node[entorno]
      (usuario)
      [below = 1.5cm of tienda]
      {Cliente};

    % Usuario
    % TODO: hacer un posicionamiento entermanete realativo (ese 13.2cm no
    % debe de estar).
    % \begin{scope}[
    %   scale=0.2,
    %   shift={($(tienda.south)-(0cm, 13.3cm)$)},
    %   local bounding box = usuario]
    %   \draw[black, thick] (-1, 0) -- (0, 2);     % Pierna derecha
    %   \draw[black, thick] (0, 2) -- (1, 0);      % Pierna izquierda
    %   \draw[black, thick] (0, 2) -- (0, 4);      % Torso
    %   \draw[black, thick] (0, 4) -- (-1, 3);     % Brazo derecho
    %   \draw[black, thick] (0, 4) -- (1, 3);      % Brazo izquierdo
    %   \draw[black, thick] (0, 4.6) circle (0.6); % Cabeza
    %   \node[etiqueta] at (0, -1) {Usuario};      % Etiqueta
    %   \node[etiqueta] at (0, 5.2) {};            % Margen superior
    % \end{scope}

    % Comunicación
    \draw[-stealth',
      dashed,
      transform canvas = {
        yshift=6pt}]
      (tienda.west)
      --
      node[
        etiqueta,
        above]
        {Número de tarjeta}
      (tokens.east);
    \draw[-stealth',
      transform canvas = {
        yshift=-6pt}]
      (tokens.east)
      --
      node[
        etiqueta,
        below]
        {Token}
      (tienda.west);
    \draw[-stealth',
      dashed]
      (tokens.south)
      --
      node[
        etiqueta,
        left]
        {Número de tarjeta}
      (banco.north);
    \draw[-stealth',
      dashed]
      (usuario.north)
      --
      node[
        etiqueta,
        right]
        {Número de tarjeta}
      (tienda.south);

    % Acotaciones
    \begin{scope}[shift={($(banco.south)-(1.5cm, 0.5cm)$)}]
      \draw[dashed]
        (0, 0)
        --
        (1, 0);
      \node at (2.1, 0) {Canal seguro};
    \end{scope}

  \end{tikzpicture}
  \caption{Arquitectura típica de un sistema tokenizador.}
  \label{figura:arquitectura_tokenizacion}
\end{figure}
