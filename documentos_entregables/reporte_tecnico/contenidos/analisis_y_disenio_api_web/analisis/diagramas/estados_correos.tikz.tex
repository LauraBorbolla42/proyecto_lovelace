%
% Diagrama de estados de correos electrónicos,
% Aplicación web de sistema tokenizador.
% Proyecto Lovelace.
%

\begin{tikzpicture}[
    estado/.style = {
        rectangle,
        draw = black,
        thin,
        inner sep = 4mm,
        text width = 25mm,
        align = center,
        minimum height = 1.5cm},
      estado_inicial/.style = {
        circle,
        minimum size = 15pt,
        fill = black,
      },
      etiqueta_transicion/.style = {
        align = center
      }]

  % Estados
  \node[estado_inicial]
    (estado_inicial) {};
  \node[estado]
    (no_verificado)
    [right = 1.8in of estado_inicial]
    {No verificado};
  \node[estado]
    (verificado)
    [below right = of no_verificado]
    {Verificado};

% Estado final
  \draw[
    fill = black]
    ($(verificado.west) + (-3.6in, -0.8in)$)
    circle
    (7.5pt);
  \draw[
    draw = black]
    ($(verificado.west) + (-3.6in, -0.8in)$)
    circle
    (10pt);

  % Transiciones
  % De inicial a no verificado
  \draw[-Stealth]
    (estado_inicial.north)
    --
    ($(estado_inicial) + (0, 0.2in)$)
    --
    node[
      etiqueta_transicion,
      text width = 1.6in,
      above]
    {\hipervinculo{cu:registrar_cliente}}
    ($(no_verificado.west) + (0, 0.2in)$);
  \draw[-Stealth]
    (estado_inicial.north)
    --
    ($(estado_inicial) - (0, 0.2in)$)
    --
    node[
      etiqueta_transicion,
      text width = 1.6in,
      below]
    {\hipervinculo{cu:actualizar_cliente}}
    ($(no_verificado.west) - (0, 0.2in)$);

  % De no verificado a verificado
  \draw[-Stealth]
    ($(no_verificado.east) + (0, 0.2in)$)
    --
    node[
      etiqueta_transicion,
      text width = 1.6in,
      above right]
    {\hipervinculo{cu:actualizar_cliente}}
    ($(no_verificado.east) + (1.25in, 0.2in)$)
    --
    ($(verificado.north) + (0.2in, 0)$);
  \draw[-Stealth]
    ($(no_verificado.east) + (0, -0.2in)$)
    --
    ($(no_verificado.east) + (0.85in, -0.2in)$)
    --
    node[
      etiqueta_transicion,
      text width = 1.8in,
      below left]
    {\hipervinculo{cu:registrar_cliente}}
    ($(verificado.north) - (0.2in, 0)$);

    % De verificado a final
    \draw[-Stealth]
      ($(verificado.south) + (-0.2in, 0)$)
      --
      ($(verificado.south) + (-0.2in, -0.4in)$)
      --
      node[
        etiqueta_transicion,
        text width = 1.6in,
        above]
        {\hipervinculo{cu:actualizar_cliente}}
      ($(verificado.west) + (-3.6in, -0.7in) + (10pt, 0)$);
    \draw[-Stealth]
        ($(verificado.south) + (+0.2in, 0)$)
        --
        ($(verificado.south) + (+0.2in, -0.6in)$)
        --
        node[
          etiqueta_transicion,
          text width = 1.6in,
          below]
          {\hipervinculo{cu:eliminar_cliente}}
        ($(verificado.west) + (-3.6in, -0.9in) + (10pt, 0)$);
\end{tikzpicture}
