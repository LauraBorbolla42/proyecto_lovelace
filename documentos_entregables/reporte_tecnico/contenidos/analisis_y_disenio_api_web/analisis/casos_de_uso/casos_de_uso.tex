%
% Lista de casos de uso para sistema tokenizador
% Capítulo de análisis y diseño de api web
% Proyecto Lovelace.
%
% IMPORTANTE: Ver caso_de_uso.sty; los casos de uso definen un sistema de
% referencias locales, para poder ocupar las mismas etquetas en casos de uso
% distintos.
%

\subsection{Casos de uso}

A continuación de detallan los casos de uso del sistema. En el diagrama
\ref{casos_de_uso_general} se muestra una vista general de todos junto con su
relación con los actores (regla de negocio \hipervinculo{rn:tipo_de_usuario})
del sistema; mientras que en la tabla \ref{casos_de_uso_vs_requerimientos} se
muestra la relación entre casos de uso y requerimientos.

\begin{table}
  \footnotesize
  \centering
  \begin{tabular}{|m{8.5cm}|m{8.5cm}|}
    \hline
    \textbf{Requerimiento} & \textbf{Caso de uso}                 \\ \hline
    \hipervinculo{rq:gestionar_sesion}
      & \multirow{8}{*}{\hipervinculo{cu:iniciar_sesion}}         \\ \cline{1-1}
    \hipervinculo{rq:recordatorio_refresco}
      &                                                           \\ \hline
    \hipervinculo{rq:validar_credenciales_iniciar_sesion}
      &                                                           \\ \hline
    \hipervinculo{rq:validar_clientes_iniciar_sesion}
      &                                                           \\ \hline
    \hipervinculo{rq:validar_credenciales_iniciar_sesion}
      &                                                           \\ \hline
    \hipervinculo{rq:validar_correo_iniciar_sesion}
      &                                                           \\ \hline
    \hipervinculo{rq:mostrar_clientes_en_espera}
      &                                                           \\ \hline
    \hipervinculo{rq:mostrar_clientes_aprobados}
      &                                                           \\ \hline
    \hipervinculo{rq:mostrar_clientes_vetados}
      &                                                           \\ \hline
    \hipervinculo{rq:notificar_cambio_cliente}
      &                                                           \\ \hline

    \hipervinculo{rq:gestionar_sesion}
      & \hipervinculo{cu:cerrar_sesion}                           \\ \hline

    \hipervinculo{rq:registrar_cliente}
      & \multirow{3}{*}{\hipervinculo{cu:registrar_cliente}}      \\ \cline{1-1}
    \hipervinculo{rq:verificar_cliente}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_cliente}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_correo}
      &                                                           \\ \hline

    \hipervinculo{rq:aprobar_cliente}
      & \multirow{2}{*}{\hipervinculo{cu:aprobar_cliente}}    \\ \cline{1-1}
    \hipervinculo{rq:mostrar_clientes_en_espera}
      &                                                           \\ \hline
    \hipervinculo{rq:notificar_cambio_administrador}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_cliente}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_llave}
      &                                                           \\ \hline

    \hipervinculo{rq:aprobar_cliente}
      & \multirow{3}{*}{\hipervinculo{cu:rechazar_cliente}}   \\ \cline{1-1}
    \hipervinculo{rq:mostrar_clientes_en_espera}
      &                                                           \\ \hline
    \hipervinculo{rq:notificar_cambio_administrador}
      &                                                           \\ \hline
    \hipervinculo{rq:confirmar_administrador}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_cliente}
      &                                                           \\ \hline

    \hipervinculo{rq:administrar_vetados}
      & \multirow{4}{*}{\hipervinculo{cu:vetar_cliente}}          \\ \hline
    \hipervinculo{rq:mostrar_clientes_aprobados}
        &                                                         \\ \hline
    \hipervinculo{rq:mostrar_clientes_aprobados}
        &                                                         \\ \hline
    \hipervinculo{rq:notificar_cambio_administrador}
      &                                                           \\ \hline
    \hipervinculo{rq:confirmar_administrador}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_cliente}
      &                                                           \\ \hline

    \hipervinculo{rq:administrar_vetados}
      & \multirow{3}{*}{\hipervinculo{cu:desvetar_cliente}}       \\ \hline
    \hipervinculo{rq:mostrar_clientes_vetados}
        &                                                         \\ \hline
    \hipervinculo{rq:notificar_cambio_administrador}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_cliente}
      &                                                           \\ \hline

    \hipervinculo{rq:actualizar_cliente}
      & \multirow{2}{*}{\hipervinculo{cu:actualizar_cliente}}    \\ \hline
    \hipervinculo{rq:notificar_envio_correo}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_correo}
      &                                                           \\ \hline

    \hipervinculo{rq:eliminar_cliente}
      & \multirow{2}{*}{\hipervinculo{cu:eliminar_cliente}}       \\ \hline
    \hipervinculo{rq:confirmar_cliente}
      &                                                           \\ \hline

    \hipervinculo{rq:administrar_refresco_de_llaves}
      & \multirow{2}{*}{\hipervinculo{cu:iniciar_refresco}}       \\ \hline
    \hipervinculo{rq:estados_tokens}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_llaves}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_clientes}
      &                                                           \\ \hline

    \hipervinculo{rq:administrar_refresco_de_llaves}
      & \multirow{2}{*}{\hipervinculo{cu:terminar_refresco}}       \\ \hline
    \hipervinculo{rq:estados_clientes}
      &                                                           \\ \hline
    \hipervinculo{rq:confirmar_cliente}
      &                                                           \\ \hline

    \hipervinculo{rq:tokenizar_tarjeta}
      & \multirow{2}{*}{\hipervinculo{cu:tokenizar_tarjeta}}      \\ \cline{1-1}
    \hipervinculo{rq:algoritmos_para_tokenizar}
      &                                                           \\ \hline

    \hipervinculo{rq:detokenizar_token}
      & \multirow{2}{*}{\hipervinculo{cu:detokenizar_token}}        \\ \cline{1-1}
    \hipervinculo{rq:algoritmos_para_tokenizar}
      &                                                           \\ \hline
    \hipervinculo{rq:retokenizar_token}
      & \multirow{3}{*}{\hipervinculo{cu:retokenizar_token}}      \\ \cline{1-1}
    \hipervinculo{rq:algoritmos_para_tokenizar}
      &                                                           \\ \hline
    \hipervinculo{rq:estados_tokens}
      &                                                           \\ \hline
  \end{tabular}

  \caption{Relación de casos de uso y requerimientos}
  \label{casos_de_uso_vs_requerimientos}
\end{table}


\begin{sidewaysfigure}
  \begin{center}
    \subimport{diagramas/}{casos_de_uso.tikz.tex}
    \caption{Diagrama general de casos de uso.}
    \label{casos_de_uso_general}
  \end{center}
\end{sidewaysfigure}

\subimport{/}{iniciar_sesion.tex}
\subimport{/}{cerrar_sesion.tex}
\subimport{/}{registrar_cliente.tex}
\subimport{/}{aprobar_cliente.tex}
\subimport{/}{rechazar_cliente.tex}
\subimport{/}{vetar_cliente.tex}
\subimport{/}{desvetar_cliente.tex}
\subimport{/}{actualizar_cliente.tex}
\subimport{/}{eliminar_cliente.tex}
\subimport{/}{iniciar_refresco.tex}
\subimport{/}{terminar_refresco.tex}
\subimport{/}{tokenizar_tarjeta.tex}
\subimport{/}{detokenizar_token.tex}
\subimport{/}{retokenizar_token.tex}
