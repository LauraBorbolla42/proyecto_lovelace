%
% Operación de shiftrows en AES,
% Capítulo de marco teórico.
% Proyecto Lovelace.
%

\begin{tikzpicture}[
  celda/.style = {
    rectangle,
    draw = black,
    fill = white,
    thin,
    inner sep = 2mm,
    align = center,
    minimum height = 10mm,
    text width = 6mm}]

  \begin{scope}[
    local bounding box = caja_a]
    \foreach \x in {0,...,2}
      \foreach \y in {0,...,3}
        {\node[celda]
           (a_\y_\x)
           at ($(\x cm, \y cm * -1)$)
           {$ a_{\y, \x}$};}
    \foreach \y in {0,...,3}
      {\node[
         celda,
         fill = gray!50!white]
         (a_\y_3)
         at ($(3 cm, \y cm * -1)$)
         {$ a_{\y, 3}$};}
    \draw[-Stealth]
      (a_1_3.south)
      ..
      controls ($(a_2_2.east) + (2mm, 0)$)
      and ($(a_2_2.east) - (2mm, 0)$)
      ..
      (a_1_2.south);
    \draw[-Stealth]
      (a_1_2.south)
      ..
      controls ($(a_2_1.east) + (2mm, 0)$)
      and ($(a_2_1.east) - (2mm, 0)$)
      ..
      (a_1_1.south);
    \draw[-Stealth]
      (a_1_1.south)
      ..
      controls ($(a_2_0.east) + (2mm, 0)$)
      and ($(a_2_0.east) - (2mm, 0)$)
      ..
      (a_1_0.south);
    \draw[-Stealth]
      (a_2_3.south)
      ..
      controls ($(a_3_2) + (2mm, 0)$)
      and ($(a_3_2) - (2mm, 0)$)
      ..
      (a_2_1.south);
    \draw[-Stealth]
      (a_2_2.south)
      ..
      controls ($(a_3_1) + (2mm, 0)$)
      and ($(a_3_1) - (2mm, 0)$)
      ..
      (a_2_0.south);
  \end{scope}

  \begin{scope}[
    local bounding box = caja_b,
    shift={($(caja_a.north east) + (5cm, -0.5cm)$)}]

    \node[celda]
      (a_0_0)
      at ($(0 cm, 0 cm * -1)$)
      {$ a_{0, 0} $};
    \node[celda]
      (a_0_1)
      at ($(1 cm, 0 cm * -1)$)
      {$ a_{0, 1} $};
    \node[celda]
      (a_0_2)
      at ($(2 cm, 0 cm * -1)$)
      {$ a_{0, 2} $};
    \node[celda,
      fill = gray!50!white]
      (a_0_3)
      at ($(3 cm, 0 cm * -1)$)
      {$ a_{0, 3} $};

    \node[celda]
      (a_1_0)
      at ($(0 cm, 1 cm * -1)$)
      {$ a_{1, 1} $};
    \node[celda]
      (a_1_1)
      at ($(1 cm, 1 cm * -1)$)
      {$ a_{1, 2} $};
    \node[celda,
      fill = gray!50!white]
      (a_1_2)
      at ($(2 cm, 1 cm * -1)$)
      {$ a_{1, 3} $};
    \node[celda]
      (a_1_3)
      at ($(3 cm, 1 cm * -1)$)
      {$ a_{1, 0} $};

    \node[celda]
      (a_2_0)
      at ($(0 cm, 2 cm * -1)$)
      {$ a_{2, 2} $};
    \node[celda,
      fill = gray!50!white]
      (a_2_1)
      at ($(1 cm, 2 cm * -1)$)
      {$ a_{2, 3} $};
    \node[celda]
      (a_2_2)
      at ($(2 cm, 2 cm * -1)$)
      {$ a_{2, 0} $};
    \node[celda]
      (a_2_3)
      at ($(3 cm, 2 cm * -1)$)
      {$ a_{2, 1} $};

    \node[celda,
      fill = gray!50!white]
      (a_3_0)
      at ($(0 cm, 3 cm * -1)$)
      {$ a_{3, 3} $};
    \node[celda]
      (a_3_1)
      at ($(1 cm, 3 cm * -1)$)
      {$ a_{3, 0} $};
    \node[celda]
      (a_3_2)
      at ($(2 cm, 3 cm * -1)$)
      {$ a_{3, 1} $};
    \node[celda]
      (a_3_3)
      at ($(3 cm, 3 cm * -1)$)
      {$ a_{3, 2} $};

  \end{scope}

  \draw[-Stealth, thick]
    ($(caja_a.east) + (1cm, 0)$)
    --
    node[above]
      {ShiftRows}
    ($(caja_b.west) - (1cm, 0)$);


\end{tikzpicture}
