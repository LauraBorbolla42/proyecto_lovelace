%
% Plantilla para entorno de algoritmos.
% Proyecto Lovelace.
%
% Mis más sinceros agradecimientos al usuario «pnpo»:
% https://tex.stackexchange.com/questions/111116/what-is-the-best-looking-
% pseudo-code-package
% La documentación:
% http://www.texdoc.net/texmf-dist/doc/latex/listings/listings.pdf
%

% Define un nuevo contador a nivel de capítulo.
\newcounter{numero_de_algoritmo}[chapter]

% Define un comando para el formato de la numeración.
\newcommand{\algoritmoformateado}{\thechapter .\arabic{numero_de_algoritmo}}

% Define la etiqueta de los captions.
\DeclareCaptionLabelFormat{etiqueta_de_algoritmo}{Pseudocódigo \algoritmoformateado}

% Define el nuevo entorno.
\lstnewenvironment{pseudocodigo}[1][]
{
  % Incrementa el contador de algoritmos.
  \refstepcounter{numero_de_algoritmo}
  % Define la configuración de los captions:
  % coloca la etiqueta definida arriba y la separa del texto con dos puntos.
  \captionsetup{labelformat=etiqueta_de_algoritmo,labelsep=colon}
  % Configuración de entorno listing
  \lstset{
    mathescape=true,
    frame=tb,
    numbers=none,
    %numberstyle=\tiny,
    basicstyle=\footnotesize,
    keywordstyle=\color{black}\bfseries,
    captionpos=b,
    extendedchars=true,
    literate={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1,
    % Palabras clave
    keywords={
      ,entrada,
      salida,
      inicio,
      fin,
      si,
      sino,
      mientras,
      para_todo,
      regresar,
      y,
      o,
      no,
      error
    }
%    xleftmargin=1.0in,
%    xrightmargin=1.0in,
    aboveskip=1em,
    belowskip=1em,
    #1 % Configuraciones específicas ¿?
  }
}
{}
